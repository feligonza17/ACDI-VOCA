diff_subsidiado_cienmil_mean[which(!is.finite(diff_subsidiado_cienmil_mean))] <- NA
correlaciones <- cbind(diff_TMI_mean,
diff_nbi_mean,
diff_prestadores_cienmil_mean,
diff_subsidiado_cienmil_mean,
reconciliacion_agreg$reconciliacion.mean,
disculpas_agreg$disculpas.mean,
violencia_agreg$violencia.mean,
rencor_agreg$rencor.mean,
memoria_agreg$memoria.mean,
memoria_expectativa_agreg$memoria_expectativa.mean)
nombres <- c("TMI",
"NBI",
"Numero Prestadores_cienmil",
"Afiliados regimen subsidiado",
"Reconciliacion",
"Disculpas",
"Violencia",
"Rencor",
"Memoria",
"Memoria_Expectativa")
colnames(correlaciones) <- nombres
rcorr(correlaciones, type="spearman") #Aqui hay cosas bien interesantes}
dfcorrelaciones <- as.data.frame(correlaciones)
regReconcililacion <- lm(Reconciliacion ~ correlaciones[,1:4], data=dfcorrelaciones)
summary(regReconcililacion)
regDisculpas <- lm(Disculpas ~ correlaciones[,1:4], data=dfcorrelaciones)
summary(regDisculpas)
regViolencia <- lm(Violencia ~ correlaciones[,1:4], data=dfcorrelaciones)
summary(regViolencia)
regRencor <- lm(Rencor ~ correlaciones[,1:4], data=dfcorrelaciones)
summary(regRencor)
regMemoria <- lm(Memoria~ correlaciones[,1:4], data=dfcorrelaciones)
summary(regMemoria)
regMemoria_Expectativa <- lm(Memoria_Expectativa~correlaciones[,1:4], data=dfcorrelaciones)
summary(regMemoria_Expectativa)
#Vamos a hacerlo primero con la diferencia en los indices. En efecto, este capta una diferencia del pasado con hoy. Como el indice es del 2017, nos concentramos en eso.
#Hay algunas variables que tienen valores de infinito. Vamos a reemplazarlos por valores perdidos
descrip_TMI$TMI.mean[which(!is.finite(descrip_TMI$TMI.mean))] <- NA
descrip_nbi$nbi.mean[which(!is.finite(descrip_nbi$nbi.mean))] <- NA
descrip_prestadores_cienmil$prestadores_cienmil.mean[which(!is.finite(descrip_prestadores_cienmil$prestadores_cienmil.mean))] <- NA
descrip_subsidiado_cienmil$subsidiado_cienmil.mean[which(!is.finite(descrip_subsidiado_cienmil$subsidiado_cienmil.mean))] <- NA
correlaciones <- cbind(descrip_TMI$TMI.mean,
descrip_nbi$nbi.mean,
descrip_prestadores_cienmil$prestadores_cienmil.mean,
descrip_subsidiado_cienmil$subsidiado_cienmil.mean,
reconciliacion_agreg$reconciliacion.mean,
disculpas_agreg$disculpas.mean,
violencia_agreg$violencia.mean,
rencor_agreg$rencor.mean,
memoria_agreg$memoria.mean,
memoria_expectativa_agreg$memoria_expectativa.mean)
nombres <- c("TMI",
"NBI",
"Numero Prestadores_cienmil",
"Afiliados regimen subsidiado",
"Reconciliacion",
"Disculpas",
"Violencia",
"Rencor",
"Memoria",
"Memoria_Expectativa")
colnames(correlaciones) <- nombres
rcorr(correlaciones, type="spearman") #Aqui hay cosas bien interesantes}
dfcorrelaciones <- as.data.frame(correlaciones)
regReconcililacion <- lm(Reconciliacion ~ correlaciones[,1:4], data=dfcorrelaciones)
summary(regReconcililacion)
regDisculpas <- lm(Disculpas ~ correlaciones[,1:4], data=dfcorrelaciones)
summary(regDisculpas)
#Numero de personas en el regiem de subsidiado
regViolencia <- lm(Violencia ~ correlaciones[,1:4], data=dfcorrelaciones)
summary(regViolencia)
regRencor <- lm(Rencor ~ correlaciones[,1:4], data=dfcorrelaciones)
summary(regRencor)
regMemoria <- lm(Memoria~ correlaciones[,1:4], data=dfcorrelaciones)
summary(regMemoria)
regMemoria_Expectativa <- lm(Memoria_Expectativa~correlaciones[,1:4], data=dfcorrelaciones)
summary(regMemoria_Expectativa)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = "C:/Users/felig/Dropbox/Proyecto Juan Camilo")
#ANTES DE CORRER, ¡CORRER LA PESTANA "CODIGO PARA ARRANCAR TODO"!
load("C:/Users/felig/Dropbox/Proyecto Juan Camilo/MergeBases_Environment.RData")
#Cargar paquetes
library(readstata13)
library(tidyr)
library(dplyr)
library(data.table)
library(readxl)
library(doBy)
library(vtable)
library(plyr)
library(gridExtra)
library(grid)
library(purrr)
library(psych)
library(ggplot2)
library(psych)
library(Hmisc)
library(matrixStats)
library(ggpubr)
library(vtable)
library(ggthemes)
homi_GA <- grep('homi_{1}', names(cede_conflicto_44), value = T) %>% grep('_pn',.,value = T, invert = T)
# Tidy data table - homicidios de transito
conflicto_44_tidy <- gather(cede_conflicto_44, 'Grupo_Armado', 'Numero_Homicidios', homi_GA)
conflicto_44_tidy$ano_base_general <- as.Date(conflicto_44_tidy$ano_base_general, '%Y', na.rm=T)
#Loop para saber poder saber qué observaciones concuerdan tanto en el año del censo como en el año del conflicto. Esto es necesario para generar el índice porque debe haber concordancia en el año de ambas bases.
a <-  c()
for(i in 1:nrow(conflicto_44_tidy)){
if(conflicto_44_tidy$ano[i]==conflicto_44_tidy$ano_base_general[i]){
a <- c(a,i)
}
}
#Limpiamos base de datos para que queden solamente las observaciones que concuerden en año de conflicto y en año del censo
conflicto_44_tidy <- conflicto_44_tidy[a,]
conflicto_44_tidy <- conflicto_44_tidy %>%
dplyr::mutate(homi_cienmil=(Numero_Homicidios/pobl_tot)*100000)
conflicto_44_tidy %>%
filter(Grupo_Armado=="homi_FARC") %>%
ggplot(
aes(x = ano, y = homi_cienmil)) +
geom_col() +
scale_color_manual(values = palette) +
facet_wrap(~Municipio) +
labs(y='Número Homicidios por cien mil personas', title='Homicidios FARC 2013', x= 'Año', caption="Fuente: Ministerio de Defensa") +
scale_x_date(date_breaks = '1 year', date_labels = '%Y',
limits = c(as.Date('2003', format = '%Y'), as.Date('2013', format = '%Y'))) +
theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle=90))
library(randomcoloR)
n <- 13
palette <- distinctColorPalette(n)
ggplot(conflicto_44_tidy,
aes(x=ano, y = homi_cienmil, color= Grupo_Armado)) +
geom_line() +
scale_color_manual(values = palette) +
facet_wrap(~Municipio) +
labs(y='Número Homicidios por cien mil personas', title='Homicidios 2003-2013', x= 'Año', caption="Fuente: Ministerio de Defensa") +
scale_x_date(date_breaks = '1 year', date_labels = '%Y',
limits = c(as.Date('2003', format = '%Y'), as.Date('2013', format = '%Y'))) +
theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle=90))+
coord_cartesian(ylim = c(0, 110))
descrip_homi <- summaryBy(homi_cienmil ~ Municipio, conflicto_44_tidy, FUN=c(sum,mean,sd), na.rm=T )	#Codigo para hacer descriptivos de los homicidios (collapse por años)
print(descrip_homi)
descrip_homi_5antes <- conflicto_44_tidy %>%
filter(ano<"2008-04-27") #Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_homi_5antes <- summaryBy(homi_cienmil ~ Municipio, descrip_homi_5antes, FUN=c(sum,mean,sd), na.rm=T )	#Descriptivos de esos anos.
descrip_homi_5despues <- conflicto_44_tidy %>%
filter(ano>"2008-04-27") #Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_homi_5despues <- summaryBy(homi_cienmil ~ Municipio, descrip_homi_5despues, FUN=c(sum,mean,sd), na.rm=T )	#Descriptivos de esos anos.
diff_homi_mean <- descrip_homi_5antes$homi_cienmil.mean -descrip_homi_5despues$homi_cienmil.mean
diff_homi_sd <- descrip_homi_5antes$homi_cienmil.sd -descrip_homi_5despues$homi_cienmil.sd #Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas ataques en los ultimos 5 anos.
print(diff_homi_mean)
ataque_GA <- grep("tpobc_{1}", names(cede_conflicto_44), value = T)
conflicto_44_ataque <- gather(cede_conflicto_44, key= "Grupo_Armado", value= "Ataques_Pobl_Civil", ataque_GA)
ggplot(conflicto_44_ataque,
aes(x=ano, y = Ataques_Pobl_Civil, color= Grupo_Armado)) +
geom_line() +
scale_color_manual(values = palette) +
facet_wrap(~Municipio) +
labs(y='Numero Ataques', title='Ataques 1993-2010', x= 'Año', caption="Fuente: Policia Nacional") +
coord_cartesian(ylim=c(0,20))+
theme_minimal()+
scale_x_date(date_breaks = '2 year', date_labels = '%Y',
limits = c(as.Date('1993', format = '%Y'), as.Date('2010', format = '%Y'))) +
theme(plot.title = element_text(hjust = 0.3), axis.text.x = element_text(angle=90))
descrip_ataques <- summaryBy(Ataques_Pobl_Civil ~ Municipio, conflicto_44_ataque, FUN=c(sum,mean,sd), na.rm=T )		#Codigo para hacer descriptivos de los ataques (collapse por anos)
print(descrip_ataques)
descrip_ataques_5antes <- conflicto_44_ataque %>%
filter(ano<"1997-04-27") #Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_ataques_5antes <- summaryBy(Ataques_Pobl_Civil ~ Municipio,
descrip_ataques_5antes, FUN=c(sum,mean,sd), na.rm=T )	#Descriptivos de esos anos.
descrip_ataques_5despues <- conflicto_44_ataque %>%
filter(ano>"2004-04-27") #Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_ataques_5despues <- summaryBy(Ataques_Pobl_Civil ~ Municipio,
descrip_ataques_5despues, FUN=c(sum,mean,sd), na.rm=T )	#Descriptivos de esos anos.
diff_ataques_mean <-
descrip_ataques_5antes$Ataques_Pobl_Civil.mean -
descrip_ataques_5despues$Ataques_Pobl_Civil.mean
diff_ataques_sd <-
descrip_ataques_5antes$Ataques_Pobl_Civil.sd -
descrip_ataques_5despues$Ataques_Pobl_Civil.sd #Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas ataques en los ultimos 5 anos.
print(diff_ataques_mean)
secuestro_GA <- grep("secu_{1}", names(cede_conflicto_44), value = T)
conflicto_44_secuestro <- gather(cede_conflicto_44, key= "Grupo_Armado", value= "Secuestros", secuestro_GA)
conflicto_44_secuestro$ano_base_general <- as.Date(conflicto_44_secuestro$ano_base_general, '%Y', na.rm=T)
#Loop para saber poder saber qué observaciones concuerdan tanto en el año del censo como en el año del conflicto. Esto es necesario para generar el índice porque debe haber concordancia en el año de ambas bases.
a <-  c()
for(i in 1:nrow(conflicto_44_secuestro)){
if(conflicto_44_secuestro$ano[i]==conflicto_44_secuestro$ano_base_general[i]){
a <- c(a,i)
}
}
#Limpiamos base de datos para que queden solamente las observaciones que concuerden en año de conflicto y en año del censo
conflicto_44_secuestro <- conflicto_44_secuestro[a,]
conflicto_44_secuestro <- conflicto_44_secuestro %>%
dplyr::mutate(secuestro_cienmil=(Secuestros/pobl_tot)*100000)
ggplot(conflicto_44_secuestro,
aes(x=ano, y = secuestro_cienmil, color= Grupo_Armado)) +
geom_line() +
scale_color_manual(values = palette) +
facet_wrap(~Municipio) +
labs(y='Número Secuestros por cada mil habitantes', title='Secuestros 2003-2013', x= 'Año', caption="Fuente: Ministerio de Defensa") +
theme_minimal()+
scale_x_date(date_breaks = '1 year', date_labels = '%Y',
limits = c(as.Date('2003', format = '%Y'), as.Date('2013', format = '%Y'))) +
theme(plot.title = element_text(hjust = 0.3), axis.text.x = element_text(angle=90))+
coord_cartesian(ylim=c(0,20))
descrip_secuestro <- summaryBy(secuestro_cienmil ~ Municipio, conflicto_44_secuestro, FUN=c(sum,median,mean,sd), na.rm=T )
print(descrip_secuestro)
descrip_secuestro_5antes <- conflicto_44_secuestro %>%
filter(ano<"2008-04-27") #Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_secuestro_5antes <- summaryBy(secuestro_cienmil ~ Municipio,
descrip_secuestro_5antes, FUN=c(sum,mean,sd), na.rm=T )	#Descriptivos de esos anos.
descrip_secuestro_5despues <- conflicto_44_secuestro %>%
filter(ano>"2008-04-27") #Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_secuestro_5despues <- summaryBy(secuestro_cienmil ~ Municipio,
descrip_secuestro_5despues, FUN=c(sum,mean,sd), na.rm=T )	#Descriptivos de esos anos.
diff_secuestro_mean <-
descrip_secuestro_5antes$secuestro_cienmil.mean -
descrip_secuestro_5despues$secuestro_cienmil.mean
diff_secuestro_sd <-
descrip_secuestro_5antes$secuestro_cienmil.sd -
descrip_secuestro_5despues$secuestro_cienmil.sd #Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas secuestro en los ultimos 5 anos.
print(diff_secuestro_mean)
secuestrop_GA <- grep("secpo_{1}", names(cede_conflicto_44), value = T)
conflicto_44_secuestrop <- gather(cede_conflicto_44, key= "Grupo_Armado", value= "Secuestros_Politicos", secuestrop_GA)
conflicto_44_secuestrop$ano_base_general <- as.Date(conflicto_44_secuestrop$ano_base_general, '%Y', na.rm=T)
#Loop para saber poder saber qué observaciones concuerdan tanto en el año del censo como en el año del conflicto. Esto es necesario para generar el índice porque debe haber concordancia en el año de ambas bases.
a <-  c()
for(i in 1:nrow(conflicto_44_secuestrop)){
if(conflicto_44_secuestrop$ano[i]==conflicto_44_secuestrop$ano_base_general[i]){
a <- c(a,i)
}
}
#Limpiamos base de datos para que queden solamente las observaciones que concuerden en año de conflicto y en año del censo
conflicto_44_secuestrop <- conflicto_44_secuestrop[a,]
conflicto_44_secuestrop <- conflicto_44_secuestrop %>%
dplyr::mutate(secuestrop_cienmil=(Secuestros_Politicos/pobl_tot)*100000)
ggplot(conflicto_44_secuestrop,
aes(x=ano, y = secuestrop_cienmil, color= Grupo_Armado)) +
geom_line() +
scale_color_manual(values = palette) +
facet_wrap(~Municipio) +
labs(y='Número secuestrops por cada mil habitantes', title='secuestrops 2003-2013', x= 'Año', caption="Fuente: Ministerio de Defensa") +
theme_minimal()+
scale_x_date(date_breaks = '1 year', date_labels = '%Y',
limits = c(as.Date('2003', format = '%Y'), as.Date('2013', format = '%Y'))) +
theme(plot.title = element_text(hjust = 0.3), axis.text.x = element_text(angle=90))+
coord_cartesian(ylim=c(0,2))
descrip_secuestrop <- summaryBy(secuestrop_cienmil ~ Municipio, conflicto_44_secuestrop, FUN=c(sum,median,mean,sd), na.rm=T )
print(descrip_secuestrop)
descrip_secuestrop_5antes <- conflicto_44_secuestrop %>%
filter(ano<"1997-04-27") #Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_secuestrop_5antes <- summaryBy(secuestrop_cienmil ~ Municipio,
descrip_secuestrop_5antes, FUN=c(sum,mean,sd), na.rm=T )	#Descriptivos de esos anos.
descrip_secuestrop_5despues <- conflicto_44_secuestrop %>%
filter(ano>"2004-04-27") #Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_secuestrop_5despues <- summaryBy(secuestrop_cienmil ~ Municipio,
descrip_secuestrop_5despues, FUN=c(sum,mean,sd), na.rm=T )	#Descriptivos de esos anos.
diff_secuestrop_mean <-
descrip_secuestrop_5antes$secuestrop_cienmil.mean -
descrip_secuestrop_5despues$secuestrop_cienmil.mean
diff_secuestrop_sd <-
descrip_secuestrop_5antes$secuestrop_cienmil.sd -
descrip_secuestrop_5despues$secuestrop_cienmil.sd #Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas secuestrop en los ultimos 5 anos.
print(diff_secuestrop_mean)
desmovilizados <- grep("desmov_{1}", names(cede_conflicto_44), value = T) #Seleccionar variables que empiecen con desmov_
desmovilizados <- desmovilizados[-c(2,4,7)]#Limpiar los nombres para poder hacer el gather
conflicto_44_desmovilizados <- gather(cede_conflicto_44,
key="Grupo_Armado",
value="Desmovilizados",
c("desmov_OTRO","desmov_FARC","desmov_ELN",
"desmov_AUC"))
conflicto_44_desmovilizados$ano_base_general <- as.Date(conflicto_44_desmovilizados$ano_base_general, '%Y', na.rm=T)
#Loop para saber poder saber qué observaciones concuerdan tanto en el año del censo como en el año del conflicto. Esto es necesario para generar el índice porque debe haber concordancia en el año de ambas bases.
a <-  c()
for(i in 1:nrow(conflicto_44_desmovilizados)){
if(conflicto_44_desmovilizados$ano[i]==conflicto_44_desmovilizados$ano_base_general[i]){
a <- c(a,i)
}
}
#Limpiamos base de datos para que queden solamente las observaciones que concuerden en año de conflicto y en año del censo
conflicto_44_desmovilizados <- conflicto_44_desmovilizados[a,]
conflicto_44_desmovilizados <- conflicto_44_desmovilizados %>%
dplyr::mutate(desmovilizados_cienmil=(Desmovilizados/pobl_tot)*100000)
ggplot(conflicto_44_desmovilizados,
aes(x=ano, y = desmovilizados_cienmil, color= Grupo_Armado)) +
geom_line() +
facet_wrap(~Municipio) +
labs(y='Desmovilizados por cada cien mil habitantes', title='Desmovilizados 1993-2010', x= 'Año', caption="Fuente: Policía Nacional") +
theme_minimal()+
scale_x_date(date_breaks = '2 year', date_labels = '%Y',
limits = c(as.Date('1993', format = '%Y'), as.Date('2010', format = '%Y'))) +
theme(plot.title = element_text(hjust = 0.3), axis.text.x = element_text(angle=90)) +
coord_cartesian(ylim=c(0,30))
descrip_desmovilizados <- summaryBy(desmovilizados_cienmil ~ Municipio, conflicto_44_desmovilizados, FUN=c(sum,median,mean,sd), na.rm=T )
print(descrip_desmovilizados)
descrip_desmovilizados_5antes <- conflicto_44_desmovilizados %>%
filter(ano<"1997-04-27") #Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_desmovilizados_5antes <- summaryBy(desmovilizados_cienmil ~ Municipio,
descrip_desmovilizados_5antes, FUN=c(sum,mean,sd), na.rm=T )	#Descriptivos de esos anos.
descrip_desmovilizados_5despues <- conflicto_44_desmovilizados %>%
filter(ano>"2004-04-27") #Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_desmovilizados_5despues <- summaryBy(desmovilizados_cienmil ~ Municipio,
descrip_desmovilizados_5despues, FUN=c(sum,mean,sd), na.rm=T )	#Descriptivos de esos anos.
diff_desmovilizados_mean <-
descrip_desmovilizados_5antes$desmovilizados_cienmil.mean -
descrip_desmovilizados_5despues$desmovilizados_cienmil.mean
diff_desmovilizados_sd <-
descrip_desmovilizados_5antes$desmovilizados_cienmil.sd -
descrip_desmovilizados_5despues$desmovilizados_cienmil.sd #Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas desmovilizados en los ultimos 5 anos.
print(diff_desmovilizados_mean)
#Vamos a hacerlo primero con el indice agregado por anos.
correlaciones <- cbind(descrip_homi$homi_cienmil.mean,
descrip_ataques$Ataques_Pobl_Civil.mean,
descrip_desmovilizados$desmovilizados_cienmil.mean,
descrip_secuestro$secuestro_cienmil.mean,
descrip_secuestrop$secuestrop_cienmil.mean,
reconciliacion_agreg$reconciliacion.mean,
disculpas_agreg$disculpas.mean,
violencia_agreg$violencia.mean,
rencor_agreg$rencor.mean,
memoria_agreg$memoria.mean,
memoria_expectativa_agreg$memoria_expectativa.mean)
nombres <- c("Homicidios",
"Ataques_Pobl_Civil",
"Desmovilizados",
"Secuestros",
"Secuestros_Politicos",
"Reconciliacion",
"Disculpas",
"Violencia",
"Rencor",
"Memoria",
"Memoria_Expectativa")
colnames(correlaciones) <- nombres
shapiro.test(descrip_ataques$Ataques_Pobl_Civil.mean) #Todos los de CEDE son no siguen distribución normal. Las escalas, por el contrario sí las siguen. Toca tomar una decisión allí.
rcorr(correlaciones, type="spearman")
dfcorrelaciones <- as.data.frame(correlaciones)
regReconcililacion <- lm(Reconciliacion ~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regReconcililacion)
regDisculpas <- lm(Disculpas ~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regDisculpas)
regViolencia <- lm(Violencia ~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regViolencia) #AQUI HAY ALGO INTERESANTE!!!! El Indice ACDIVOCA que mide violencia es determinado por los homicidios, los ataques a la poblacion y los secuestros.
regRencor <- lm(Rencor ~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regRencor)  #AQUI HAY ALGO INTERESANTE!!!! El Indice ACDIVOCA que mide rencor es determinado por los ataques a la poblacion. El signo es negativo lo cual es contraintuitivo.
regMemoria <- lm(Memoria~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regMemoria)
regMemoria_Expectativa <- lm(Memoria_Expectativa~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regMemoria_Expectativa)
#Vamos a hacerlo primero con la diferencia en los indices. En efecto, este capta una diferencia del pasado con hoy. Como el indice es del 2017, nos concentramos en eso.
correlaciones <- cbind(diff_homi_mean,
diff_ataques_mean,
diff_desmovilizados_mean,
diff_secuestro_mean,
diff_secuestrop_mean,
reconciliacion_agreg$reconciliacion.mean,
disculpas_agreg$disculpas.mean,
violencia_agreg$violencia.mean,
rencor_agreg$rencor.mean,
memoria_agreg$memoria.mean,
memoria_expectativa_agreg$memoria_expectativa.mean)
nombres <- c("Homicidios",
"Ataques_Pobl_Civil",
"Desmovilizados",
"Secuestros",
"Secuestros_Politicos",
"Reconciliacion",
"Disculpas",
"Violencia",
"Rencor",
"Memoria",
"Memoria_Expectativa")
colnames(correlaciones) <- nombres
rcorr(correlaciones, type="spearman")
#Regresiones Lineales Exploratorias
dfcorrelaciones <- as.data.frame(correlaciones)
regReconcililacion <- lm(Reconciliacion ~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regReconcililacion)
regDisculpas <- lm(Disculpas ~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regDisculpas)
regViolencia <- lm(Violencia ~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regViolencia)
regRencor <- lm(Rencor ~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regRencor)
regMemoria <- lm(Memoria~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regMemoria)
regMemoria_Expectativa <- lm(Memoria_Expectativa~ Homicidios+Ataques_Pobl_Civil+Desmovilizados+Secuestros+Secuestros_Politicos, data=dfcorrelaciones)
summary(regMemoria_Expectativa)
#Vamos a ver como cambia la correlacion de Rencor (ACDIVOCA) con Homicidios en el tiempo
conflicto_44_tidy$ano_num <- substring(conflicto_44_tidy$ano,1,4)
conflicto_44_tidy$ano_num <- as.numeric(conflicto_44_tidy$ano_num)
#Loop para hacer la correlacion por año.
homicidios <- c()
x <- c()
y <- c()
for(i in 1:10) {
homicidios <- conflicto_44_tidy %>%
filter(ano_num==2002+i) %>%
select(homi_cienmil, Municipio) %>%
summaryBy(homi_cienmil ~ Municipio, ., FUN=c(sum, mean), na.rm=T ) %>%
select(homi_cienmil.mean) %>%
as.data.frame()
conflicto_44_tidy$valores_corr[i] <- cor(homicidios,
rencor_agreg$rencor.mean,
method = "spearman")
x[i] <- 2002+i
y[i] <- cor(homicidios, rencor_agreg$rencor.mean, method = "spearman")
}
plot(x,
y,
type="b",
col="blue",
main= "Correlacion Rencor con Homicidios en el tiempo",
xlab="Años",
ylab= "Correlacion")
#Vamos a ver como cambia la correlacion de Violencia (ACDIVOCA) con Homicidios en el tiempo
conflicto_44_tidy$ano_num <- substring(conflicto_44_tidy$ano,1,4)
conflicto_44_tidy$ano_num <- as.numeric(conflicto_44_tidy$ano_num)
#Loop para hacer la correlacion por año.
homicidios <- c()
x <- c()
y <- c()
for(i in 1:10) {
homicidios <- conflicto_44_tidy %>%
filter(ano_num==2002+i) %>%
select(homi_cienmil, Municipio) %>%
summaryBy(homi_cienmil ~ Municipio, ., FUN=c(sum, mean), na.rm=T ) %>%
select(homi_cienmil.mean) %>%
as.data.frame()
conflicto_44_tidy$valores_corr[i] <- cor(homicidios,
violencia_agreg$violencia.mean,
method = "spearman")
x[i] <- 2002+i
y[i] <- cor(homicidios, violencia_agreg$violencia.mean, method = "spearman")
}
plot(x,
y,
type="b",
col="blue",
main= "Correlacion Violencia (ACDIVOCA) con Homicidios en el tiempo",
xlab="Años",
ylab= "Correlacion")
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("C:/Users/felig/ACDI-VOCA")
#render your sweet site.
rmarkdown::render_site()
setwd("C:/Users/felig/ACDI-VOCA")
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("C:/Users/felig/ACDI-VOCA")
#render your sweet site.
rmarkdown::render_site()
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("C:/Users/felig/ACDI-VOCA")
#render your sweet site.
rmarkdown::render_site()
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("C:/Users/felig/ACDI-VOCA")
#render your sweet site.
rmarkdown::render_site()
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("C:/Users/felig/ACDI-VOCA")
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("C:/Users/felig/ACDI-VOCA")
#render your sweet site.
rmarkdown::render_site()
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("C:/Users/felig/ACDI-VOCA")
#render your sweet site.
rmarkdown::render_site()
install.packages("httpuv")
library(httpuv)
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("C:/Users/felig/ACDI-VOCA")
#render your sweet site.
rmarkdown::render_site()
names(cede_conflicto_44)
cede_conflicto_44[minorias]
cede_conflicto_44[minorias,]
cede_conflicto_44["minorias"]
cede_conflicto_44["minorias"[NA]]
cede_conflicto_44[minorias[NA]]
cede_conflicto_44["minorias"[minorias=="NA"]] <- 0
cede_conflicto_44["minorias"["minorias"=="NA"]] <- 0
cede_conflicto_44[minorias[NA]]
cede_conflicto_44["minorias"]
cede_conflicto_44["minorias"["minorias"==NA]] <- 0
