diff_t_establ_mean <- descrip_t_establ_5antes$t_establ.mean -descrip_t_establ_5despues$t_establ.mean
diff_t_establ_sd <- descrip_t_establ_5antes$t_establ.sd -descrip_t_establ_5despues$t_establ.sd
diff_t_establ_median <- descrip_t_establ_5antes$t_establ.median -descrip_t_establ_5despues$t_establ.median#Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas ataques en los ultimos 5 anos.
names_acdi <- acdi_imr$Municipio_imr
acdi_imr <- acdi_imr %>% arrange(Municipio_imr)
par_descrip_alumnos_cienmil <- descrip_alumnos_cienmil[descrip_alumnos_cienmil$municipio %in% names_acdi,]
par_descrip_alumnos_cienmil <- par_descrip_alumnos_cienmil %>% arrange(municipio)
par_descrip_phds_cienmil <- descrip_phds_cienmil[descrip_phds_cienmil$municipio %in% names_acdi,]
par_descrip_phds_cienmil <- par_descrip_phds_cienmil %>% arrange(municipio)
par_descrip_estudiantes_proy_cienmil <- descrip_estudiantes_proy_cienmil[descrip_estudiantes_proy_cienmil$municipio %in% names_acdi,]
par_descrip_estudiantes_proy_cienmil <- par_descrip_estudiantes_proy_cienmil %>% arrange(municipio)
par_descrip_t_establ <- descrip_t_establ[descrip_t_establ$municipio %in% names_acdi,]
par_descrip_t_establ <- par_descrip_t_establ %>% arrange(municipio)
#Hay algunas variables que tienen valores de infinito. Vamos a reemplazarlos por valores perdidos
par_descrip_alumnos_cienmil$alumnos_cienmil.mean[which(!is.finite(par_descrip_alumnos_cienmil$alumnos_cienmil.mean))] <- NA
par_descrip_phds_cienmil$phds_cienmil.mean[which(!is.finite(par_descrip_phds_cienmil$phds_cienmil.mean))] <- NA
par_descrip_estudiantes_proy_cienmil$estudiantes_proy_cienmil.mean[which(!is.finite(par_descrip_estudiantes_proy_cienmil$estudiantes_proy_cienmil.mean))] <- NA
par_descrip_t_establ$t_establ.mean[which(!is.finite(par_descrip_t_establ$t_establ.mean))] <- NA
par_diff_alumnos_cienmil <- descrip_alumnos_cienmil_5antes[descrip_alumnos_cienmil_5antes$municipio %in% names_acdi,]$alumnos_cienmil.mean -descrip_alumnos_cienmil_5despues[descrip_alumnos_cienmil_5despues$municipio %in% names_acdi,]$alumnos_cienmil.mean
par_diff_phds_cienmil <- descrip_phds_cienmil_5antes[descrip_phds_cienmil_5antes$municipio %in% names_acdi,]$phds_cienmil.mean - descrip_phds_cienmil_5despues[descrip_phds_cienmil_5despues$municipio %in% names_acdi,]$phds_cienmil.mean
par_diff_estudiantes_proy_cienmil <- descrip_estudiantes_proy_cienmil_5antes[descrip_estudiantes_proy_cienmil_5antes$municipio %in% names_acdi,]$estudiantes_proy_cienmil.mean-descrip_estudiantes_proy_cienmil_5despues[descrip_estudiantes_proy_cienmil_5despues$municipio %in% names_acdi,]$estudiantes_proy_cienmil.mean
par_diff_t_establ <- descrip_t_establ_5antes[descrip_t_establ_5antes$municipio %in% names_acdi,]$t_establ.mean-descrip_t_establ_5despues[descrip_t_establ_5despues$municipio %in% names_acdi,]$t_establ.mean
par_diff_alumnos_cienmil[which(!is.finite(par_diff_alumnos_cienmil))] <- NA
par_diff_phds_cienmil[which(!is.finite(par_diff_phds_cienmil))] <- NA
par_diff_estudiantes_proy_cienmil[which(!is.finite(par_diff_estudiantes_proy_cienmil))] <- NA
par_diff_t_establ[which(!is.finite(par_diff_t_establ))] <- NA
cede_tierras_44$municipio[cede_tierras_44$municipio=="Bojaya"] <- "Bojayá"
cede_tierras_44$municipio[cede_tierras_44$municipio=="Bogotá, D.C."] <- "Bogotá, D.c."
cede_tierras_44$municipio[cede_tierras_44$municipio=="Cartagena"] <- "Cartagena De Indias"
cede_tierras_44$municipio[cede_tierras_44$municipio=="Bojaya"] <- "Bojayá"
cede_tierras_44$municipio[cede_tierras_44$municipio=="Cartagena del Chairá"] <- "Cartagena Del Chairá"
cede_tierras_44$municipio[cede_tierras_44$municipio=="San Vicente del Caguán"] <- "San Vicente Del Caguán"
descrip_nuf_peq <- summaryBy(nuf_peq ~ municipio, cede_tierras_44, FUN=c(mean,sd,median), na.rm=T )    #Codigo para hacer descriptivos de los homicidios (collapse por anos)
descrip_nuf_peq %<>% arrange(municipio)
descrip_nuf_peq_5antes <- cede_tierras_44 %>%
filter(ano<'2006-04-27')#Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_nuf_peq_5antes <- summaryBy(nuf_peq ~ municipio, descrip_nuf_peq_5antes, FUN=c(mean,sd,median), na.rm=T )  #Descriptivos de esos anos.
descrip_nuf_peq_5despues <- cede_tierras_44 %>%
filter(ano>'2010-04-27')#Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_nuf_peq_5despues <- summaryBy(nuf_peq ~ municipio, descrip_nuf_peq_5despues, FUN=c(mean,sd,median), na.rm=T )  #Descriptivos de esos anos.
diff_nuf_peq_mean <- descrip_nuf_peq_5antes$nuf_peq.mean -descrip_nuf_peq_5despues$nuf_peq.mean
diff_nuf_peq_sd <- descrip_nuf_peq_5antes$nuf_peq.sd -descrip_nuf_peq_5despues$nuf_peq.sd
diff_nuf_peq_median <- descrip_nuf_peq_5antes$nuf_peq.median -descrip_nuf_peq_5despues$nuf_peq.median#Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas ataques en los ultimos 5 anos.
descrip_nuf_medianos <- summaryBy(nuf_medianos ~ municipio, cede_tierras_44, FUN=c(mean,sd,median), na.rm=T )  #Codigo para hacer descriptivos de los homicidios (collapse por anos)
descrip_nuf_medianos %<>% arrange(municipio)
descrip_nuf_medianos_5antes <- cede_tierras_44 %>%
filter(ano<'2006-04-27') #Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_nuf_medianos_5antes <- summaryBy(nuf_medianos ~ municipio, descrip_nuf_medianos_5antes, FUN=c(mean,sd,median), na.rm=T )   #Descriptivos de esos anos.
descrip_nuf_medianos_5despues <- cede_tierras_44 %>%
filter(ano>'2010-04-27') #Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_nuf_medianos_5despues <- summaryBy(nuf_medianos ~ municipio, descrip_nuf_medianos_5despues, FUN=c(mean,sd,median), na.rm=T )   #Descriptivos de esos anos.
diff_nuf_medianos_mean <- descrip_nuf_medianos_5antes$nuf_medianos.mean -descrip_nuf_medianos_5despues$nuf_medianos.mean
diff_nuf_medianos_sd <- descrip_nuf_medianos_5antes$nuf_medianos.sd -descrip_nuf_medianos_5despues$nuf_medianos.sd
diff_nuf_medianos_median <- descrip_nuf_medianos_5antes$nuf_medianos.median -descrip_nuf_medianos_5despues$nuf_medianos.median #Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas ataques en los ultimos 5 anos.
descrip_nuf_grandes <- summaryBy(nuf_grandes ~ municipio, cede_tierras_44, FUN=c(mean,sd,median), na.rm=T )    #Codigo para hacer descriptivos de los homicidios (collapse por anos)
descrip_nuf_grandes %<>% arrange(municipio)
descrip_nuf_grandes_5antes <- cede_tierras_44 %>%
filter(ano<"2006-04-27") #Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_nuf_grandes_5antes <- summaryBy(nuf_grandes ~ municipio, descrip_nuf_grandes_5antes, FUN=c(mean,sd,median), na.rm=T )  #Descriptivos de esos anos.
descrip_nuf_grandes_5despues <- cede_tierras_44 %>%
filter(ano>"2010-04-27") #Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_nuf_grandes_5despues <- summaryBy(nuf_grandes ~ municipio, descrip_nuf_grandes_5despues, FUN=c(mean,sd,median), na.rm=T )  #Descriptivos de esos anos.
diff_nuf_grandes_mean <- descrip_nuf_grandes_5antes$nuf_grandes.mean -descrip_nuf_grandes_5despues$nuf_grandes.mean
diff_nuf_grandes_sd <- descrip_nuf_grandes_5antes$nuf_grandes.sd -descrip_nuf_grandes_5despues$nuf_grandes.sd
diff_nuf_grandes_median <- descrip_nuf_grandes_5antes$nuf_grandes.median -descrip_nuf_grandes_5despues$nuf_grandes.median #Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas ataques en los ultimos 5 anos.
descrip_vrf_peq <- summaryBy(vrf_peq ~ municipio, cede_tierras_44, FUN=c(mean,sd,median), na.rm=T )    #Codigo para hacer descriptivos de los homicidios (collapse por anos)
descrip_vrf_peq %<>% arrange(municipio)
descrip_vrf_peq_5antes <- cede_tierras_44 %>%
filter(ano<'2006-04-27')#Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_vrf_peq_5antes <- summaryBy(vrf_peq ~ municipio, descrip_vrf_peq_5antes, FUN=c(mean,sd,median), na.rm=T )  #Descriptivos de esos anos.
descrip_vrf_peq_5despues <- cede_tierras_44 %>%
filter(ano>'2010-04-27')#Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_vrf_peq_5despues <- summaryBy(vrf_peq ~ municipio, descrip_vrf_peq_5despues, FUN=c(mean,sd,median), na.rm=T )  #Descriptivos de esos anos.
diff_vrf_peq_mean <- descrip_vrf_peq_5antes$vrf_peq.mean -descrip_vrf_peq_5despues$vrf_peq.mean
diff_vrf_peq_sd <- descrip_vrf_peq_5antes$vrf_peq.sd -descrip_vrf_peq_5despues$vrf_peq.sd
diff_vrf_peq_median <- descrip_vrf_peq_5antes$vrf_peq.median -descrip_vrf_peq_5despues$vrf_peq.median#Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas ataques en los ultimos 5 anos.
descrip_vrf_medianos <- summaryBy(vrf_medianos ~ municipio, cede_tierras_44, FUN=c(mean,sd,median), na.rm=T )  #Codigo para hacer descriptivos de los homicidios (collapse por anos)
descrip_vrf_medianos %<>% arrange(municipio)
descrip_vrf_medianos_5antes <- cede_tierras_44 %>%
filter(ano<'2006-04-27') #Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_vrf_medianos_5antes <- summaryBy(vrf_medianos ~ municipio, descrip_vrf_medianos_5antes, FUN=c(mean,sd,median), na.rm=T )   #Descriptivos de esos anos.
descrip_vrf_medianos_5despues <- cede_tierras_44 %>%
filter(ano>'2010-04-27') #Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_vrf_medianos_5despues <- summaryBy(vrf_medianos ~ municipio, descrip_vrf_medianos_5despues, FUN=c(mean,sd,median), na.rm=T )   #Descriptivos de esos anos.
diff_vrf_medianos_mean <- descrip_vrf_medianos_5antes$vrf_medianos.mean -descrip_vrf_medianos_5despues$vrf_medianos.mean
diff_vrf_medianos_sd <- descrip_vrf_medianos_5antes$vrf_medianos.sd -descrip_vrf_medianos_5despues$vrf_medianos.sd
diff_vrf_medianos_median <- descrip_vrf_medianos_5antes$vrf_medianos.median -descrip_vrf_medianos_5despues$vrf_medianos.median #Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas ataques en los ultimos 5 anos.
descrip_vrf_grandes <- summaryBy(vrf_grandes ~ municipio, cede_tierras_44, FUN=c(mean,sd,median), na.rm=T )    #Codigo para hacer descriptivos de los homicidios (collapse por anos)
descrip_vrf_grandes %<>% arrange(municipio)
descrip_vrf_grandes_5antes <- cede_tierras_44 %>%
filter(ano<"2006-04-27") #Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_vrf_grandes_5antes <- summaryBy(vrf_grandes ~ municipio, descrip_vrf_grandes_5antes, FUN=c(mean,sd,median), na.rm=T )  #Descriptivos de esos anos.
descrip_vrf_grandes_5despues <- cede_tierras_44 %>%
filter(ano>"2010-04-27") #Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_vrf_grandes_5despues <- summaryBy(vrf_grandes ~ municipio, descrip_vrf_grandes_5despues, FUN=c(mean,sd,median), na.rm=T )  #Descriptivos de esos anos.
diff_vrf_grandes_mean <- descrip_vrf_grandes_5antes$vrf_grandes.mean -descrip_vrf_grandes_5despues$vrf_grandes.mean
diff_vrf_grandes_sd <- descrip_vrf_grandes_5antes$vrf_grandes.sd -descrip_vrf_grandes_5despues$vrf_grandes.sd
diff_vrf_grandes_median <- descrip_vrf_grandes_5antes$vrf_grandes.median -descrip_vrf_grandes_5despues$vrf_grandes.median #Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas ataques en los ultimos 5 anos.
descrip_ba_tot_nu <- summaryBy(ba_tot_nu ~ municipio, cede_tierras_44, FUN=c(mean,sd,median), na.rm=T )    #Codigo para hacer descriptivos de los homicidios (collapse por anos)
descrip_ba_tot_nu %<>% arrange(municipio)
descrip_ba_tot_nu_5antes <- cede_tierras_44 %>%
filter(ano<'2006-04-27') #Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_ba_tot_nu_5antes <- summaryBy(ba_tot_nu ~ municipio, descrip_ba_tot_nu_5antes, FUN=c(mean,sd,median), na.rm=T )    #Descriptivos de esos anos.
descrip_ba_tot_nu_5despues <- cede_tierras_44 %>%
filter(ano>'2008-04-27') #Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_ba_tot_nu_5despues <- summaryBy(ba_tot_nu ~ municipio, descrip_ba_tot_nu_5despues, FUN=c(mean,sd,median), na.rm=T )    #Descriptivos de esos anos.
diff_ba_tot_nu_mean <- descrip_ba_tot_nu_5antes$ba_tot_nu.mean -descrip_ba_tot_nu_5despues$ba_tot_nu.mean
diff_ba_tot_nu_sd <- descrip_ba_tot_nu_5antes$ba_tot_nu.sd -descrip_ba_tot_nu_5despues$ba_tot_nu.sd
diff_ba_tot_nu_median <- descrip_ba_tot_nu_5antes$ba_tot_nu.median -descrip_ba_tot_nu_5despues$ba_tot_nu.median#Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas ataques en los ultimos 5 anos.
descrip_ba_tot_vr <- summaryBy(ba_tot_vr ~ municipio, cede_tierras_44, FUN=c(mean,sd,median), na.rm=T )    #Codigo para hacer descriptivos de los homicidios (collapse por anos)
descrip_ba_tot_vr %<>% arrange(municipio)
descrip_ba_tot_vr_5antes <- cede_tierras_44 %>%
filter(ano<'2006-04-27') #Codigo para seleccionar solamente las variables que sean menores al ano 2008
descrip_ba_tot_vr_5antes <- summaryBy(ba_tot_vr ~ municipio, descrip_ba_tot_vr_5antes, FUN=c(mean,sd,median), na.rm=T )    #Descriptivos de esos anos.
descrip_ba_tot_vr_5despues <- cede_tierras_44 %>%
filter(ano>'2008-04-27') #Codigo para seleccionar solamente las variables que sean mayores al ano 2008.
descrip_ba_tot_vr_5despues <- summaryBy(ba_tot_vr ~ municipio, descrip_ba_tot_vr_5despues, FUN=c(mean,sd,median), na.rm=T )    #Descriptivos de esos anos.
diff_ba_tot_vr_mean <- descrip_ba_tot_vr_5antes$ba_tot_vr.mean -descrip_ba_tot_vr_5despues$ba_tot_vr.mean
diff_ba_tot_vr_sd <- descrip_ba_tot_vr_5antes$ba_tot_vr.sd -descrip_ba_tot_vr_5despues$ba_tot_vr.sd
diff_ba_tot_vr_median <- descrip_ba_tot_vr_5antes$ba_tot_vr.median -descrip_ba_tot_vr_5despues$ba_tot_vr.median #Sacar diferencias entre esos estadisticos. Un valor negativo es que hay mas ataques en los ultimos 5 anos.
#Vamos a hacerlo primero con el indice agregado por anos.
names_acdi <- acdi_imr$Municipio_imr
acdi_imr <- acdi_imr %>% arrange(Municipio_imr)
par_descrip_nuf_peq <- descrip_nuf_peq[descrip_nuf_peq$municipio %in% names_acdi,]
par_descrip_nuf_peq <- par_descrip_nuf_peq %>% arrange(municipio)
par_descrip_nuf_medianos <- descrip_nuf_medianos[descrip_nuf_medianos$municipio %in% names_acdi,]
par_descrip_nuf_medianos <- par_descrip_nuf_medianos %>% arrange(municipio)
par_descrip_nuf_grandes <- descrip_nuf_grandes[descrip_nuf_grandes$municipio %in% names_acdi,]
par_descrip_nuf_grandes <- par_descrip_nuf_grandes %>% arrange(municipio)
par_descrip_vrf_peq <- descrip_vrf_peq[descrip_vrf_peq$municipio %in% names_acdi,]
par_descrip_vrf_peq <- par_descrip_vrf_peq %>% arrange(municipio)
par_descrip_vrf_medianos <- descrip_vrf_medianos[descrip_vrf_medianos$municipio %in% names_acdi,]
par_descrip_vrf_medianos <- par_descrip_vrf_medianos %>% arrange(municipio)
par_descrip_vrf_grandes <- descrip_vrf_grandes[descrip_vrf_grandes$municipio %in% names_acdi,]
par_descrip_vrf_grandes <- par_descrip_vrf_grandes %>% arrange(municipio)
#Hay algunas variables que tienen valores de infinito. Vamos a reemplazarlos por valores perdidos
par_descrip_nuf_peq$nuf_peq.mean[which(!is.finite(par_descrip_nuf_peq$nuf_peq.mean))] <- NA
par_descrip_nuf_medianos$nuf_medianos.mean[which(!is.finite(par_descrip_nuf_medianos$nuf_medianos.mean))] <- NA
par_descrip_nuf_grandes$nuf_grandes.mean[which(!is.finite(par_descrip_nuf_grandes$nuf_grandes.mean))] <- NA
par_descrip_vrf_peq$vrf_peq.mean[which(!is.finite(par_descrip_vrf_peq$vrf_peq.mean))] <- NA
par_descrip_vrf_medianos$vrf_medianos.mean[which(!is.finite(par_descrip_vrf_medianos$vrf_medianos.mean))] <- NA
par_descrip_vrf_grandes$vrf_grandes.mean[which(!is.finite(par_descrip_vrf_grandes$vrf_grandes.mean))] <- NA
#Vamos a hacerlo primero con el indice agregado por anos.
par_diff_nuf_peq <- descrip_nuf_peq_5antes[descrip_nuf_peq_5antes$municipio %in% names_acdi,]$nuf_peq.mean -descrip_nuf_peq_5despues[descrip_nuf_peq_5despues$municipio %in% names_acdi,]$nuf_peq.mean
par_diff_nuf_medianos <- descrip_nuf_medianos_5antes[descrip_nuf_medianos_5antes$municipio %in% names_acdi,]$nuf_medianos.mean - descrip_nuf_medianos_5despues[descrip_nuf_medianos_5despues$municipio %in% names_acdi,]$nuf_medianos.mean
par_diff_nuf_grandes <- descrip_nuf_grandes_5antes[descrip_nuf_grandes_5antes$municipio %in% names_acdi,]$nuf_grandes.mean-descrip_nuf_grandes_5despues[descrip_nuf_grandes_5despues$municipio %in% names_acdi,]$nuf_grandes.mean
par_diff_vrf_peq <- descrip_vrf_peq_5antes[descrip_vrf_peq_5antes$municipio %in% names_acdi,]$vrf_peq.mean -descrip_vrf_peq_5despues[descrip_vrf_peq_5despues$municipio %in% names_acdi,]$vrf_peq.mean
par_diff_vrf_medianos <- descrip_vrf_medianos_5antes[descrip_vrf_medianos_5antes$municipio %in% names_acdi,]$vrf_medianos.mean - descrip_vrf_medianos_5despues[descrip_vrf_medianos_5despues$municipio %in% names_acdi,]$vrf_medianos.mean
par_diff_vrf_grandes <- descrip_vrf_grandes_5antes[descrip_vrf_grandes_5antes$municipio %in% names_acdi,]$vrf_grandes.mean-descrip_vrf_grandes_5despues[descrip_vrf_grandes_5despues$municipio %in% names_acdi,]$vrf_grandes.mean
par_diff_nuf_peq[which(!is.finite(par_diff_nuf_peq))] <- NA
par_diff_nuf_medianos[which(!is.finite(par_diff_nuf_medianos))] <- NA
par_diff_nuf_grandes[which(!is.finite(par_diff_nuf_grandes))] <- NA
par_diff_vrf_peq[which(!is.finite(par_diff_vrf_peq))] <- NA
par_diff_vrf_medianos[which(!is.finite(par_diff_vrf_medianos))] <- NA
par_diff_vrf_grandes[which(!is.finite(par_diff_vrf_grandes))] <- NA
base_stata <- as.data.frame(cbind(descrip_homi,
diff_homi_mean,
diff_homi_median,
diff_homi_sd,
descrip_ataques[-1],
diff_ataques_mean,
diff_ataques_median,
diff_ataques_sd,
descrip_secuestro[-1],
diff_secuestro_mean,
diff_secuestro_median,
diff_secuestro_sd,
descrip_secuestrop[-1],
diff_secuestrop_mean,
diff_secuestrop_median,
diff_secuestrop_sd,
descrip_desmovilizados[-1],
diff_desmovilizados_mean,
diff_desmovilizados_median,
diff_desmovilizados_sd,
descrip_desemp_fisc[-1],
diff_desemp_fisc_mean,
diff_desemp_fisc_median,
diff_desemp_fisc_sd,
descrip_inv_total_cienmil[-1],
diff_inv_total_cienmil_mean,
diff_inv_total_cienmil_median,
diff_inv_total_cienmil_sd,
descrip_desemp_int[-1],
diff_desemp_int_mean,
diff_desemp_int_median,
diff_desemp_int_sd,
descrip_inv_fortinst_cienmil[-1],
diff_inv_fortinst_cienmil_mean,
diff_inv_fortinst_cienmil_median,
diff_inv_fortinst_cienmil_sd,
descrip_IGA_total[-1],
diff_IGA_total_mean,
diff_IGA_total_median,
diff_IGA_total_sd,
descrip_TMI[-1],
diff_TMI_mean,
diff_TMI_median,
diff_TMI_sd,
descrip_nbi[-1],
diff_nbi_mean,
diff_nbi_median,
diff_nbi_sd,
descrip_prestadores_cienmil[-1],
diff_prestadores_cienmil_mean,
diff_prestadores_cienmil_median,
diff_prestadores_cienmil_sd,
descrip_subsidiado_cienmil[-1],
diff_subsidiado_cienmil_mean,
diff_subsidiado_cienmil_median,
diff_subsidiado_cienmil_sd,
descrip_contributivo_cienmil[-1],
diff_contributivo_cienmil_mean,
diff_contributivo_cienmil_median,
diff_contributivo_cienmil_sd,
descrip_alumnos_cienmil[-1],
diff_alumnos_cienmil_mean,
diff_alumnos_cienmil_median,
diff_alumnos_cienmil_sd,
descrip_estudiantes_proy_cienmil[-1],
diff_estudiantes_proy_cienmil_mean,
diff_estudiantes_proy_cienmil_median,
diff_estudiantes_proy_cienmil_sd,
descrip_phds_cienmil[-1],
diff_phds_cienmil_mean,
diff_phds_cienmil_median,
diff_phds_cienmil_sd,
descrip_t_establ[-1],
diff_t_establ_mean,
diff_t_establ_median,
diff_t_establ_sd,
descrip_nuf_peq[-1],
diff_nuf_peq_mean,
diff_nuf_peq_median,
diff_nuf_peq_sd,
descrip_nuf_medianos[-1],
diff_nuf_medianos_mean,
diff_nuf_medianos_median,
diff_nuf_medianos_sd,
descrip_nuf_grandes[-1],
diff_nuf_grandes_mean,
diff_nuf_grandes_median,
diff_nuf_grandes_sd,
descrip_vrf_peq[-1],
diff_vrf_peq_mean,
diff_vrf_peq_median,
diff_vrf_peq_sd,
descrip_vrf_medianos[-1],
diff_vrf_medianos_mean,
diff_vrf_medianos_median,
diff_vrf_medianos_sd,
descrip_vrf_grandes[-1],
diff_vrf_grandes_mean,
diff_vrf_grandes_median,
diff_vrf_grandes_sd,
descrip_ba_tot_nu[-1],
diff_ba_tot_nu_mean,
diff_ba_tot_nu_median,
diff_ba_tot_nu_sd,
descrip_ba_tot_vr[-1],
diff_ba_tot_vr_mean,
diff_ba_tot_vr_median,
diff_ba_tot_vr_sd,
reconciliacion_agreg[-1],
disculpas_agreg[-1],
violencia_agreg[-1],
rencor_agreg[-1],
memoria_agreg[-1],
memoria_expectativa_agreg[-1],
confianza_vec_agreg[-1],
confianza_col_agreg[-1],
armonia_col_agreg[-1],
buena_voluntad_agreg[-1],
pertenencia_agreg[-1]
))
#Exportar base de datos
library(foreign)
write.dta(base_stata, "C:/Users/felig/Dropbox/Proyecto Juan Camilo/Para Stata/base_acdi_stata.dta")
base_stata %>%
mutate(mun_pobre=as.factor((ifelse
(nbi_mean>quantile(nbi_mean, 0.75),
"Alta Pobreza",
ifelse(nbi_mean<quantile(nbi_mean, 0.25),
"Baja Pobreza",
NA))))) %>%
filter(mun_pobre!=is.na(mun_pobre)) %>%
t.test(armonia_col_mean ~ mun_pobre, .)
x <- base_stata[,165:207] %>% select(ends_with("mean"))
par(mar=c(4,2,0.1,0.1))
for(i in which(colnames(x)=="reconciliacion_mean")){
plot <-
base_stata %>%
mutate(mun_pobre=(ifelse(nbi_mean>mean(nbi_mean),
"Alta Pobreza","Baja Pobreza"))) %>%
ggplot(aes(x=Municipio, y=.[[names(x)[i]]], col=mun_pobre)) +
geom_bar(stat="identity", fill = "white")+
theme_minimal()+
labs(y=names(x[i]))+
theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle=90))
print(plot)
}
par(mfrow=c(2,4))
x <- base_stata[,165:207] %>% select(ends_with("mean"))
for(i in which(colnames(x)=="reconciliacion_mean")){
plot <-
base_stata %>%
mutate(mun_pobre=as.factor((ifelse
(nbi_mean>quantile(nbi_mean, 0.75),
"Alta Pobreza",
ifelse(nbi_mean<quantile(nbi_mean, 0.25),
"Baja Pobreza",
NA))))) %>%
filter(mun_pobre!=is.na(mun_pobre)) %>%
ggplot(aes(x=Municipio, y=.[[names(x)[i]]], col=mun_pobre)) +
geom_bar(stat="identity", na.rm=TRUE, fill="white")+
scale_fill_manual(values = c("#00AFBB", "#E7B800"))+
labs(y=names(x[i]))+
theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle=90))
print(plot)
}
par(mfrow=c(2,4))
x <- base_stata[,165:207] %>% select(ends_with("mean"))
for(i in which(colnames(x)=="reconciliacion_mean")){
plot <-
base_stata %>%
mutate(mun_pobre=as.factor((ifelse
(nbi_mean==max(nbi_mean),
"Alta Pobreza",
ifelse(nbi_mean==min(nbi_mean),
"Baja Pobreza",
NA))))) %>%
filter(mun_pobre!=is.na(mun_pobre)) %>%
ggplot(aes(x=Municipio, y=.[[names(x)[i]]], col=mun_pobre)) +
geom_bar(stat="identity", na.rm=TRUE, fill="white")+
scale_fill_manual(values = c("#00AFBB", "#E7B800"))+
labs(y=names(x[i]))+
theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle=90))
print(plot)
}
base_stata %>%
mutate(mun_pobre=(ifelse(nbi_mean>mean(nbi_mean),
"Alta Pobreza","Baja Pobreza"))) %>%
filter(mun_pobre!=is.na(mun_pobre)) %>%
t.test(reconciliacion_mean ~ mun_pobre, .)
x <- base_stata[,165:207] %>% select(ends_with("mean"))
par(mar=c(4,2,0.1,0.1))
for(i in which(colnames(x)=="reconciliacion_mean")){
plot <-
base_stata %>%
mutate(mun_pobre=(ifelse(nbi.mean>mean(nbi.mean),
"Alta Pobreza","Baja Pobreza"))) %>%
ggplot(aes(x=Municipio, y=.[[names(x)[i]]], col=mun_pobre)) +
geom_bar(stat="identity", fill = "white")+
theme_minimal()+
labs(y=names(x[i]))+
theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle=90))
print(plot)
}
par(mfrow=c(2,4))
x <- base_stata[,165:207] %>% select(ends_with("mean"))
for(i in which(colnames(x)=="reconciliacion_mean")){
plot <-
base_stata %>%
mutate(mun_pobre=as.factor((ifelse
(nbi.mean>quantile(nbi.mean, 0.75),
"Alta Pobreza",
ifelse(nbi.mean<quantile(nbi.mean, 0.25),
"Baja Pobreza",
NA))))) %>%
filter(mun_pobre!=is.na(mun_pobre)) %>%
ggplot(aes(x=Municipio, y=.[[names(x)[i]]], col=mun_pobre)) +
geom_bar(stat="identity", na.rm=TRUE, fill="white")+
scale_fill_manual(values = c("#00AFBB", "#E7B800"))+
labs(y=names(x[i]))+
theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle=90))
print(plot)
}
par(mfrow=c(2,4))
x <- base_stata[,165:207] %>% select(ends_with("mean"))
for(i in which(colnames(x)=="reconciliacion_mean")){
plot <-
base_stata %>%
mutate(mun_pobre=as.factor((ifelse
(nbi.mean==max(nbi.mean),
"Alta Pobreza",
ifelse(nbi.mean==min(nbi.mean),
"Baja Pobreza",
NA))))) %>%
filter(mun_pobre!=is.na(mun_pobre)) %>%
ggplot(aes(x=Municipio, y=.[[names(x)[i]]], col=mun_pobre)) +
geom_bar(stat="identity", na.rm=TRUE, fill="white")+
scale_fill_manual(values = c("#00AFBB", "#E7B800"))+
labs(y=names(x[i]))+
theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle=90))
print(plot)
}
base_stata %>%
mutate(mun_pobre=(ifelse(nbi.mean>mean(nbi.mean),
"Alta Pobreza","Baja Pobreza"))) %>%
filter(mun_pobre!=is.na(mun_pobre)) %>%
t.test(reconciliacion_mean ~ mun_pobre, .)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = "C:/Users/felig/Dropbox/Proyecto Juan Camilo/Evento ACIDVOCA/")
#ANTES DE CORRER, ¡CORRER LA PESTANA "CODIGO PARA ARRANCAR TODO"!
#Set Working Directory
setwd("C:/Users/felig/Dropbox/Proyecto Juan Camilo/Evento ACIDVOCA/")
rm(list=ls())
#Importar base de datos donde esta todo
library(haven)
library(readstata13)
library(tidyr)
library(plyr)
library(dplyr)
library(gridExtra)
library(ggplot2)
library(forcats)
load("C:/Users/felig/Dropbox/Proyecto Juan Camilo/MergeBases_Environment.RData")
base_stata <- read_dta("C:/Users/felig/Dropbox/Proyecto Juan Camilo/Para Stata/base_acdi_stata.dta", encoding="UTF-8")
x <- base_stata[,165:207] %>% select(ends_with("mean"))
par(mar=c(4,2,0.1,0.1))
for(i in which(colnames(x)=="reconciliacion_mean")){
plot <-
base_stata %>%
mutate(mun_homicidio=(ifelse(homi_cienmil_mean>mean(homi_cienmil_mean),
"Alta homicidios","Baja homicidios"))) %>%
ggplot(aes(x=Municipio, y=.[[names(x)[i]]], col=mun_homicidio)) +
geom_bar(stat="identity", fill = "white")+
theme_minimal()+
labs(y=names(x[i]))+
theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle=90))
print(plot)
}
par(mfrow=c(2,4))
x <- base_stata[,165:207] %>% select(ends_with("mean"))
for(i in which(colnames(x)=="reconciliacion_mean")){
plot <-
base_stata %>%
mutate(mun_homicidio=as.factor((ifelse
(homi_cienmil_mean>quantile(homi_cienmil_mean, 0.75),
"Alta homicidios",
ifelse(homi_cienmil_mean<quantile(homi_cienmil_mean, 0.25),
"Baja homicidios",
NA))))) %>%
filter(mun_homicidio!=is.na(mun_homicidio)) %>%
ggplot(aes(x=Municipio, y=.[[names(x)[i]]], col=mun_homicidio)) +
geom_bar(stat="identity", na.rm=TRUE, fill="white")+
scale_fill_manual(values = c("#00AFBB", "#E7B800"))+
labs(y=names(x[i]))+
theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle=90))
print(plot)
}
par(mfrow=c(2,4))
x <- base_stata[,165:207] %>% select(ends_with("mean"))
for(i in which(colnames(x)=="reconciliacion_mean")){
plot <-
base_stata %>%
mutate(mun_homicidio=as.factor((ifelse
(homi_cienmil_mean==max(homi_cienmil_mean),
"Alta homicidios",
ifelse(homi_cienmil_mean==min(homi_cienmil_mean),
"Baja homicidios",
NA))))) %>%
filter(mun_homicidio!=is.na(mun_homicidio)) %>%
ggplot(aes(x=Municipio, y=.[[names(x)[i]]], col=mun_homicidio)) +
geom_bar(stat="identity", na.rm=TRUE, fill="white")+
scale_fill_manual(values = c("#00AFBB", "#E7B800"))+
labs(y=names(x[i]))+
theme(plot.title = element_text(hjust = 0.5), axis.text.x = element_text(angle=90))
print(plot)
}
base_stata %>%
mutate(mun_homicidio=as.factor((ifelse
(homi_cienmil_mean>quantile(homi_cienmil_mean, 0.75),
"Alta homicidios",
ifelse(homi_cienmil_mean<quantile(homi_cienmil_mean, 0.25),
"Baja homicidios",
NA))))) %>%
filter(mun_homicidio!=is.na(mun_homicidio)) %>%
t.test(reconciliacion_mean ~ mun_homicidio, .)
base_stata %>%
mutate(mun_pobre=(ifelse(nbi.mean>mean(nbi.mean),
"Alta Pobreza","Baja Pobreza"))) %>%
filter(mun_pobre!=is.na(mun_pobre)) %>%
t.test(armonia_col.mean ~ mun_pobre, .)
base_stata$nbi_mean
base_stata %>%
mutate(mun_pobre=(ifelse(nbi_mean>mean(nbi_mean),
"Alta Pobreza","Baja Pobreza"))) %>%
filter(mun_pobre!=is.na(mun_pobre)) %>%
t.test(armonia_col.mean ~ mun_pobre, .)
base_stata %>%
mutate(mun_pobre=(ifelse(nbi_mean>mean(nbi_mean),
"Alta Pobreza","Baja Pobreza"))) %>%
filter(mun_pobre!=is.na(mun_pobre)) %>%
t.test(armonia_col_mean ~ mun_pobre, .)
base_stata %>%
mutate(mun_pobre=as.factor((ifelse
(nbi_mean>quantile(nbi_mean, 0.75),
"Alta Pobreza",
ifelse(nbi_mean<quantile(nbi_mean, 0.25),
"Baja Pobreza",
NA))))) %>%
filter(mun_pobre!=is.na(mun_pobre)) %>%
t.test(armonia_col_mean ~ mun_pobre, .)
setwd("C:/Users/felig/ACDI-VOCA")
#Set our working directory.
#This helps avoid confusion if our working directory is
#not our site because of other projects we were
#working on at the time.
setwd("C:/Users/felig/ACDI-VOCA")
#render your sweet site.
rmarkdown::render_site("_site.html")
